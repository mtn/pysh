@@left_recursion :: False

start
    =
    cmdline
    ;

cmdline
    =
    | pipeline:pipeline ';' cmdline:cmdline
    | pipeline:pipeline
    ;

pipeline
    =
    | command:command '|' pipeline:pipeline
    | command:command
    ;

command
    =
    | cd: (/cd/ | /'cd'/) [ dest_dir:arg ]
    | args: { arg }+
    ;

arg
    =
    | quoted_arg: /'[^'|;]*'/
    | unquoted_arg: /[^\s|;]+/
    ;

